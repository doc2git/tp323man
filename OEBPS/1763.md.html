<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta http-equiv="Default-Style" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="styles.css"/>
    <title>Test Book</title>
  </head>
  <body class="book-content">
    <p>ThinkPHP删除数据使用delete方法，例如：</p>
    <pre>
      <code>$Form = M('Form');
$Form-&gt;delete(5);</code>
    </pre>
    <p>表示删除主键为5的数据，delete方法可以删除单个数据，也可以删除多个数据，这取决于删除条件，例如：</p>
    <pre>
      <code>$User = M("User"); // 实例化User对象
$User-&gt;where('id=5')-&gt;delete(); // 删除id为5的用户数据
$User-&gt;delete('1,2,5'); // 删除主键为1,2和5的用户数据
$User-&gt;where('status=0')-&gt;delete(); // 删除所有状态为0的用户数据</code>
    </pre>
    <p>delete方法的返回值是删除的记录数，如果返回值是false则表示SQL出错，返回值如果为0表示没有删除任何数据。</p>
    <p>也可以用order和limit方法来限制要删除的个数，例如：</p>
    <pre>
      <code>// 删除所有状态为0的5 个用户数据 按照创建时间排序
$User-&gt;where('status=0')-&gt;order('create_time')-&gt;limit('5')-&gt;delete(); </code>
    </pre>
    <p>为了避免错删数据，如果没有传入任何条件进行删除操作的话，不会执行删除操作，例如：</p>
    <pre>
      <code>$User = M("User"); // 实例化User对象
$User-&gt;delete(); </code>
    </pre>
    <p>不会删除任何数据，如果你确实要删除所有的记录，除非使用下面的方式：</p>
    <pre>
      <code>$User = M("User"); // 实例化User对象
$User-&gt;where('1')-&gt;delete(); </code>
    </pre>
    <p>数据删除方法支持的连贯操作方法有： </p>
    <table>
      <thead>
        <tr>
          <th>连贯操作</th>
          <th>作用</th>
          <th>支持的参数类型</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>where</td>
          <td>用于查询或者更新条件的定义</td>
          <td>字符串、数组和对象</td>
        </tr>
        <tr>
          <td>table</td>
          <td>用于定义要操作的数据表名称</td>
          <td>字符串和数组</td>
        </tr>
        <tr>
          <td>alias</td>
          <td>用于给当前数据表定义别名</td>
          <td>字符串</td>
        </tr>
        <tr>
          <td>order</td>
          <td>用于对数据排序</td>
          <td>字符串和数组</td>
        </tr>
        <tr>
          <td>lock</td>
          <td>用于数据库的锁机制</td>
          <td>布尔值</td>
        </tr>
        <tr>
          <td>relation</td>
          <td>用于关联删除（需要关联模型支持）</td>
          <td>字符串</td>
        </tr>
        <tr>
          <td>scope</td>
          <td>用于命名范围</td>
          <td>字符串、数组</td>
        </tr>
        <tr>
          <td>bind</td>
          <td>用于数据绑定操作</td>
          <td>数组</td>
        </tr>
        <tr>
          <td>comment</td>
          <td>用于SQL注释</td>
          <td>字符串</td>
        </tr>
        <tr>
          <td>fetchSql</td>
          <td>不执行SQL而只是返回SQL</td>
          <td>布尔值</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
